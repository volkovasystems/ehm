{"version":3,"sources":["meta.support.js"],"names":["harden","require","sxty4","NAME","ENTITY","TYPE","ERROR","OBJECT","BOOLEAN","STRING","NUMBER","VALUE","GARBAGE","CORRUPTED","TAGGED","CLASS_NAME_PATTERN","DATA_URL_PATTERN","EVAL_USAGE_PATTERN","FUNCTION_CLASS_USAGE_PATTERN","FLOAT_NUMBER_PATTERN","SYMBOL_PATTERN","TAG_PATTERN","DATA_URL_TAG","DEFAULT_FORMAT","DEFAULT_DATA_URL_PREFIX","EMPTY_STRING","Meta","instance","instanceOf","blueprint","name","constructor","__initialize__","error","entity","state","arguments","length","undefined","push","Error","data","test","stringify","index","status","setError","parser","parameter","splice","filter","concat","defer","token","match","type","value","replace","decode","toLowerCase","method","Function","stack","Infinity","NaN","parseFloat","parseInt","JSON","parse","format","deserialize","valueOf","symbol","trim","create","tag","check","toUpperCase","toString","toNumber","toBoolean","typeOf","procedure","self","encode","hasError","isTagged","serialize","Object","prototype","call","module","exports"],"mappings":"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","file":"meta.support.js","sourcesContent":["\"use strict\";\n\n/*;\n\t@submodule-license:\n\t\tThe MIT License (MIT)\n\t\t@mit-license\n\n\t\tCopyright (@c) 2017 Richeve Siodina Bebedor\n\t\t@email: richeve.bebedor@gmail.com\n\n\t\tPermission is hereby granted, free of charge, to any person obtaining a copy\n\t\tof this software and associated documentation files (the \"Software\"), to deal\n\t\tin the Software without restriction, including without limitation the rights\n\t\tto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\t\tcopies of the Software, and to permit persons to whom the Software is\n\t\tfurnished to do so, subject to the following conditions:\n\n\t\tThe above copyright notice and this permission notice shall be included in all\n\t\tcopies or substantial portions of the Software.\n\n\t\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\t\tIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\t\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n\t\tAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\t\tLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\t\tOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n\t\tSOFTWARE.\n\t@end-submodule-license\n\n\t@submodule-configuration:\n\t\t{\n\t\t\t\"package\": \"ehm\",\n\t\t\t\"path\": \"ehm/meta.module.js\",\n\t\t\t\"file\": \"meta.module.js\",\n\t\t\t\"module\": \"ehm\",\n\t\t\t\"author\": \"Richeve S. Bebedor\",\n\t\t\t\"eMail\": \"richeve.bebedor@gmail.com\",\n\t\t\t\"repository\": \"https://github.com/volkovasystems/ehm.git\",\n\t\t\t\"test\": \"ehm-test.js\",\n\t\t\t\"global\": false,\n\t\t\t\"internal\": true,\n\t\t\t\"class\": true\n\t\t}\n\t@end-submodule-configuration\n\n\t@submodule-documentation:\n\t\tMeta class construct.\n\t@end-submodule-documentation\n\n\t@include:\n\t\t{\n\t\t\t\"harden\": \"harden\",\n\t\t\t\"sxty4\": \"sxty4\"\n\t\t}\n\t@end-include\n*/\n\nconst harden = require( \"harden\" );\nconst sxty4 = require( \"sxty4\" );\n\nconst NAME = Symbol( \"name\" );\nconst ENTITY = Symbol( \"entity\" );\nconst TYPE = Symbol( \"type\" );\n\nconst ERROR = Symbol( \"error\" );\n\nconst OBJECT = Symbol( \"object\" );\nconst BOOLEAN = Symbol( \"boolean\" );\nconst STRING = Symbol( \"string\" );\nconst NUMBER = Symbol( \"number\" );\nconst VALUE = Symbol( \"value\" );\n\nconst GARBAGE = Symbol( \"garbage\" );\nconst CORRUPTED = Symbol( \"corrupted\" );\nconst TAGGED = Symbol( \"tagged\" );\n\nconst CLASS_NAME_PATTERN = /^[A-Z][a-zA-Z0-9]+$/;\nconst DATA_URL_PATTERN = /^data\\:[a-z][\\-a-z0-9]+\\/([a-z][\\-a-z0-9]+)(?:\\;base64)?\\,/;\nconst EVAL_USAGE_PATTERN = /\\beval\\(.*?\\)|\\beval\\b/gm;\nconst FUNCTION_CLASS_USAGE_PATTERN = /\\bFunction\\(.*?\\)|\\bFunction\\b/gm;\nconst FLOAT_NUMBER_PATTERN = /\\./;\nconst SYMBOL_PATTERN = /^Symbol\\((.*?)\\)$/;\nconst TAG_PATTERN = /^\\[([a-zA-Z][\\-a-zA-Z0-9]+)\\s+[A-Z][a-zA-Z0-9]+(?:\\:(.+?))?\\]$/;\n\nconst DATA_URL_TAG = \"data-url-tag\";\nconst DEFAULT_FORMAT = DATA_URL_TAG;\nconst DEFAULT_DATA_URL_PREFIX = \"data:text/@type;base64,\";\nconst EMPTY_STRING = \"\";\n\nclass Meta {\n\tstatic [ Symbol.hasInstance ]( instance ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"instance:required\": \"*\"\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\treturn this.instanceOf( instance, this );\n\t}\n\n\tstatic instanceOf( instance, blueprint ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"instance:required\": \"*\",\n\t\t\t\t\t\"blueprint\": \"function\"\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\tif( (\n\t\t\ttypeof instance == \"function\"\n\t\t\t&& typeof blueprint == \"function\"\n\t\t\t&& instance.name === blueprint.name\n\t\t) || (\n\t\t\ttypeof instance == \"object\"\n\t\t\t&& instance != null\n\t\t\t&& typeof blueprint == \"function\"\n\t\t\t&& instance.constructor.name === blueprint.name\n\t\t) ){\n\t\t\treturn true;\n\t\t}\n\n\t\t/*;\n\t\t\t@note:\n\t\t\t\tPossibility of instance being garbage.\n\n\t\t\t\tDo not remove this. This is a special procedure.\n\t\t\t@end-note\n\t\t*/\n\t\tif( instance === GARBAGE ){\n\t\t\treturn false;\n\t\t}\n\n\t\tif( typeof blueprint != \"function\" ){\n\t\t\tblueprint = this;\n\t\t}\n\n\t\ttry{\n\t\t\treturn ( new blueprint( GARBAGE ) )\n\t\t\t\t.__initialize__( instance, blueprint.name )\n\t\t\t\t.instanceOf( blueprint.name );\n\n\t\t}catch( error ){\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tstatic create( blueprint, entity, state ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"blueprint:required\": \"function\",\n\t\t\t\t\t\"entity\": \"*\",\n\t\t\t\t\t\"state\": Array\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\tif( arguments.length == 0 ){\n\t\t\tblueprint = this;\n\t\t\tentity = undefined;\n\t\t\tstate = [ ];\n\t\t}\n\n\t\tif( arguments.length == 1 ){\n\t\t\tblueprint = this;\n\t\t\tentity = arguments[ 0 ];\n\t\t\tstate = [ ];\n\t\t}\n\n\t\tif( arguments.length == 2 ){\n\t\t\tblueprint = arguments[ 0 ];\n\t\t\tentity = arguments[ 1 ];\n\t\t\tstate = [ ];\n\t\t}\n\n\t\tif( typeof blueprint != \"function\" ){\n\t\t\tblueprint = this;\n\t\t}\n\n\t\tif( typeof state == \"object\" ){\n\t\t\tstate = Array.from( state );\n\n\t\t}else{\n\t\t\tstate = [ ];\n\t\t}\n\n\t\t/*;\n\t\t\t@note:\n\t\t\t\tIf we are going to throw an error here, possibility of infinite recursion.\n\n\t\t\t\tWe can push an error instead.\n\t\t\t@end-note\n\t\t*/\n\t\tif( !( blueprint instanceof this ) ){\n\t\t\tstate.push( new Error( `incompatible blueprint, ${ blueprint.name }` ) );\n\n\t\t\tblueprint = this;\n\t\t}\n\n\t\tlet data = new blueprint( entity );\n\n\t\tif( TAG_PATTERN.test( data.stringify( ) ) ){\n\t\t\tstate.push( TAGGED );\n\t\t}\n\n\t\tlet index = state.length;\n\t\twhile( index-- ){\n\t\t\tlet status = state[ index ];\n\n\t\t\tif( status instanceof Error ){\n\t\t\t\tdata.setError( status );\n\n\t\t\t}else{\n\t\t\t\tharden( status, status, data );\n\t\t\t}\n\t\t}\n\n\t\treturn Object.freeze( data );\n\t}\n\n\t/*;\n\t\t@static-method-documentation:\n\t\t\tGeneric meta data deserialization.\n\t\t@end-static-method-documentation\n\t*/\n\tstatic deserialize( data, parser, blueprint ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"data\": \"*\",\n\t\t\t\t\t\"parser\": \"function\",\n\t\t\t\t\t\"blueprint\": \"function\"\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\tlet parameter = Array.from( arguments );\n\n\t\tif( arguments.length == 2 ){\n\t\t\tparameter = [ arguments[ 0 ], undefined, arguments[ 1 ] ];\n\t\t}\n\n\t\tblueprint = parameter.splice( 1 )\n\t\t\t.filter( ( parameter ) => {\n\t\t\t\treturn (\n\t\t\t\t\ttypeof parameter == \"function\"\n\t\t\t\t\t&& \"name\" in parameter\n\t\t\t\t\t&& typeof parameter.name == \"string\"\n\t\t\t\t\t&& parameter.name != EMPTY_STRING\n\t\t\t\t\t&& CLASS_NAME_PATTERN.test( parameter.name )\n\t\t\t\t);\n\t\t\t} )\n\t\t\t.concat( this )[ 0 ];\n\n\t \tlet defer = function parser( data ){\n\t\t\tif( typeof data == \"string\" ){\n\t\t\t\ttry{\n\t\t\t\t\tlet token = data.match( TAG_PATTERN ) || [ ];\n\t\t\t\t\tlet type = token[ 1 ] || \"undefined\";\n\t\t\t\t\tlet value = token[ 2 ] || EMPTY_STRING;\n\n\t\t\t\t\tif( value == EMPTY_STRING ){\n\t\t\t\t\t\tvalue = data;\n\t\t\t\t\t}\n\n\t\t\t\t\t/*;\n\t\t\t\t\t\t@note:\n\t\t\t\t\t\t\tIf the value is a data url format, try to decode it.\n\n\t\t\t\t\t\t\tEnsure that we have the correct type.\n\t\t\t\t\t\t@end-note\n\t\t\t\t\t*/\n\t\t\t\t\tif( DATA_URL_PATTERN.test( value ) ){\n\t\t\t\t\t\ttype = ( value.match( DATA_URL_PATTERN ) || [ ] )[ 1 ] || type;\n\t\t\t\t\t\tvalue = value.replace( DEFAULT_DATA_URL_PREFIX.replace( \"@type\", type ), EMPTY_STRING );\n\t\t\t\t\t\tvalue = sxty4( value ).decode( );\n\t\t\t\t\t}\n\n\t\t\t\t\tswitch( type ){\n\t\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\t\tif( value.toLowerCase( ) == \"true\" ){\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif( value.toLowerCase( ) == \"false\" ){\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthrow new Error( `cannot parse boolean, ${ value }` );\n\n\t\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\tif( EVAL_USAGE_PATTERN.test( value ) ){\n\t\t\t\t\t\t\t\t\tthrow new Error( \"cannot parse function, contains eval, potential security issue\" );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif( FUNCTION_CLASS_USAGE_PATTERN.test( value ) ){\n\t\t\t\t\t\t\t\t\tthrow new Error( \"cannot parse function, contains function class, potential security issue\" );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tlet method = ( new Function( \"return \" + value ) )( );\n\n\t\t\t\t\t\t\t\tif( typeof method != \"function\" ){\n\t\t\t\t\t\t\t\t\treturn function( ){ throw new Error( `no operation done, ${ value }` ); };\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn method;\n\n\t\t\t\t\t\t\t}catch( error ){\n\t\t\t\t\t\t\t\tthrow new Error( `cannot parse function, ${ value }, ${ error.stack }` );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase \"number\":\n\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\tif( value == \"Infinity\" ){\n\t\t\t\t\t\t\t\t\treturn Infinity;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif( value == \"NaN\" ){\n\t\t\t\t\t\t\t\t\treturn NaN;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif( FLOAT_NUMBER_PATTERN.test( value ) ){\n\t\t\t\t\t\t\t\t\treturn parseFloat( value );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif( !FLOAT_NUMBER_PATTERN.test( value ) ){\n\t\t\t\t\t\t\t\t\treturn parseInt( value );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthrow new Error( `cannot parse number, ${ value }` );\n\n\t\t\t\t\t\t\t}catch( error ){\n\t\t\t\t\t\t\t\tthrow new Error( `cannot parse number, ${ value }, ${ error.stack }` );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\tif( value == \"null\" ){\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\tvalue = JSON.parse( value );\n\n\t\t\t\t\t\t\t\t/*;\n\t\t\t\t\t\t\t\t\tThis is the specification for the basic\n\t\t\t\t\t\t\t\t\t\tmeta object structure.\n\t\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\t\tif(\n\t\t\t\t\t\t\t\t\t\"type\" in value && typeof value.name == \"string\"\n\t\t\t\t\t\t\t\t\t&& \"name\" in value && typeof value.name == \"string\"\n\t\t\t\t\t\t\t\t\t&& \"value\" in value && typeof value.value == \"string\"\n\t\t\t\t\t\t\t\t\t&& \"format\" in value && typeof value.format == \"string\"\n\t\t\t\t\t\t\t\t\t&& value.format == DATA_URL_TAG\n\t\t\t\t\t\t\t\t\t&& TAG_PATTERN.test( value.value )\n\t\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t\treturn Meta.deserialize( value.value ).valueOf( );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn value;\n\n\t\t\t\t\t\t\t}catch( error ){\n\t\t\t\t\t\t\t\treturn new Error( `cannot parse object, ${ value }, ${ error.stack }` );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase \"symbol\":\n\t\t\t\t\t\t\tlet symbol = ( ( value.match( SYMBOL_PATTERN ) || [ ] )[ 1 ] || EMPTY_STRING ).trim( );\n\n\t\t\t\t\t\t\tif( symbol == EMPTY_STRING ){\n\t\t\t\t\t\t\t\tthrow new Error( `cannot parse symbol, ${ value }` );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn Symbol( symbol );\n\n\t\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\t\treturn value;\n\n\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn value;\n\n\t\t\t\t}catch( error ){\n\t\t\t\t\tthrow new Error( `cannot parse, ${ data }, ${ error.stack }` );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t};\n\n\t\tparser = parameter.splice( 1 )\n\t\t\t.filter( ( parameter ) => {\n\t\t\t\treturn (\n\t\t\t\t\ttypeof parameter == \"function\"\n\t\t\t\t\t&& (\n\t\t\t\t\t\t!( \"name\" in parameter )\n\t\t\t\t\t\t|| typeof parameter.name != \"string\"\n\t\t\t\t\t\t|| parameter.name == EMPTY_STRING\n\t\t\t\t\t\t|| parameter.name == \"anonymous\"\n\t\t\t\t\t\t|| parameter.name == \"parser\"\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} )\n\t\t\t.concat( defer );\n\n\t\ttry{\n\t\t\treturn Meta.create( blueprint, parser( data ) );\n\n\t\t}catch( error ){\n\t\t\treturn Meta.create( blueprint, defer( data ), [ CORRUPTED, error ] );\n\t\t}\n\t}\n\n\t/*;\n\t\t@static-method-documentation:\n\t\t\tChecks if the tag is compatible.\n\t\t@end-static-method-documentation\n\n\t\t@note:\n\t\t\tOverride for specific compatibility checking.\n\t\t@end-note\n\t*/\n\tstatic isCompatible( tag ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"tag\": \"string\"\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\tif( typeof tag != \"string\" ){\n\t\t\treturn false;\n\t\t}\n\n\t\treturn TAG_PATTERN.test( tag );\n\t}\n\n\tconstructor( entity, name ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"entity:required\": \"*\",\n\t\t\t\t\t\"name:required\": \"string\"\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\tthis.__initialize__( entity, name );\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tThis is an internal initialization procedure.\n\n\n\t\t@end-method-documentation\n\t*/\n\t__initialize__( entity, name ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"entity:required\": \"*\",\n\t\t\t\t\t\"name:required\": \"string\"\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\tif( !this.check( entity ) ){\n\t\t\tthrow new Error( \"invalid entity\" );\n\t\t}\n\n\t\tlet type = typeof entity;\n\n\t\tname = name || type.replace( /^./, ( match ) => match.toUpperCase( ) );\n\n\t\tif( typeof name != \"string\" ){\n\t\t\tthrow new Error( \"invalid name\" );\n\t\t}\n\n\t\tthis[ TYPE ] = type;\n\t\tthis[ NAME ] = name;\n\t\tthis[ ENTITY ] = entity;\n\n\t\treturn this;\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tFor generic checking of entity this is always true,\n\t\t\t\tand this should be overridden.\n\t\t@end-method-documentation\n\t*/\n\tcheck( entity ){\n\t\treturn true;\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tThis will only support three types; string, number, boolean.\n\n\t\t\tThese types are serializable.\n\t\t@end-method-documentation\n\n\t\t@note:\n\t\t\tDo not override this.\n\t\t@end-note\n\t*/\n\t[ Symbol.toPrimitive ]( type ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"type:required\": \"string\",\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\tswitch( type ){\n\t\t\tcase \"string\":\n\t\t\t\treturn this.toString( );\n\n\t\t\tcase \"number\":\n\t\t\t\treturn this.toNumber( );\n\n\t\t\tdefault:\n\t\t\t\treturn this.toBoolean( );\n\t\t}\n\t}\n\n\t/*\n\t\t@note:\n\t\t\tThese methods should be overridden.\n\t\t@end-note\n\t*/\n\n\tget [ Symbol.toStringTag ]( ){\n\t\treturn this[ NAME ];\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tGenerally, this will return the basic object meta specification.\n\n\t\t\tThe format property dictates how the value must be interpreted.\n\t\t@end-method-documentation\n\n\t\t@note:\n\t\t\tFor special values that needs specific conversion to object type,\n\t\t\t\tthis method needs to be overridden.\n\t\t@end-note\n\t*/\n\tget [ OBJECT ]( ){\n\t\treturn Object.freeze( {\n\t\t\t\"type\": this[ TYPE ],\n\t\t\t\"name\": this[ NAME ],\n\t\t\t\"value\": this.serialize( ),\n\t\t\t\"format\": DATA_URL_TAG\n\t\t} );\n\t}\n\n\tget [ BOOLEAN ]( ){\n\t\treturn true;\n\t}\n\n\tget [ STRING ]( ){\n\t\treturn Object.prototype.toString.call( this.valueOf( ) );\n\t}\n\n\tget [ NUMBER ]( ){\n\t\treturn Infinity;\n\t}\n\n\t/*;\n\t\t@get-method-documentation:\n\t\t\tReturns the original value.\n\n\t\t\tAs much as possible do not override this.\n\t\t@end-get-method-documentation\n\t*/\n\tget [ VALUE ]( ){\n\t\treturn this[ ENTITY ];\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tReturn a string tag format,\n\n\t\t\t\t[type Name:value]\n\n\t\t\tThe value is optional.\n\t\t@end-method-documentation\n\t*/\n\ttag( value ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"value\": \"string\"\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\tif( typeof value != \"string\" ){\n\t\t\tvalue = EMPTY_STRING;\n\t\t}\n\n\t\tif( value != EMPTY_STRING ){\n\t\t\tvalue = `:${ value }`;\n\t\t}\n\n\t\treturn `[${ this[ TYPE ] } ${ this[ NAME ] }:@value]`.replace( \":@value\", value );\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tReturns the object conversion of this data.\n\n\t\t\tThis will be used on JSON.stringify method.\n\t\t@end-method-documentation\n\t*/\n\ttoJSON( ){\n\t\treturn this[ OBJECT ];\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tReturns the boolean conversion of this data.\n\t\t@end-method-documentation\n\n\t\t@note:\n\t\t\tAs much as possible, do not override this method.\n\t\t@end-note\n\t*/\n\ttoBoolean( ){\n\t\treturn this[ BOOLEAN ];\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tReturns the string conversion of this data.\n\t\t@end-method-documentation\n\n\t\t@note:\n\t\t\tAs much as possible, do not override this method.\n\t\t@end-note\n\t*/\n\ttoString( ){\n\t\treturn this[ STRING ];\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tReturns the numerical conversion of this data.\n\t\t@end-method-documentation\n\n\t\t@note:\n\t\t\tAs much as possible, do not override this method.\n\t\t@end-note\n\t*/\n\ttoNumber( ){\n\t\treturn this[ NUMBER ];\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tReturns the original value.\n\t\t@end-method-documentation\n\n\t\t@note:\n\t\t\tAs much as possible, do not override this method.\n\t\t@end-note\n\t*/\n\tvalueOf( ){\n\t\treturn this[ VALUE ];\n\t}\n\n\ttypeOf( type ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"type:required\": \"string\"\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\tif( typeof type == \"string\" ){\n\t\t\treturn typeof this.valueOf( ) == type;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/*\n\t\t@note:\n\t\t\tSome cases that instanceOf needs to be overridden.\n\t\t@end-note\n\t*/\n\tinstanceOf( blueprint ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"blueprint:required\": [\n\t\t\t\t\t\t\"function\",\n\t\t\t\t\t\t\"string\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\tlet entity = this.valueOf( );\n\n\t\tif( typeof blueprint == \"function\" ){\n\t\t\treturn (\n\t\t\t\tthis instanceof blueprint\n\t\t\t\t|| entity instanceof blueprint\n\t\t\t\t|| typeof blueprint.name == \"string\" && this.instanceOf( blueprint.name )\n\t\t\t);\n\t\t}\n\n\t\tif( typeof blueprint == \"string\" ){\n\t\t\tif( this.typeOf( blueprint.toLowerCase( ) ) ){\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif( entity === null || typeof entity == \"undefined\" ){\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif( typeof entity == \"function\" && entity.name === blueprint ){\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tdo{\n\t\t\t\tif( (\n\t\t\t\t\ttypeof entity == \"function\"\n\t\t\t\t\t&& entity.name === blueprint\n\t\t\t\t) || (\n\t\t\t\t\ttypeof entity.constructor == \"function\"\n\t\t\t\t\t&& entity.constructor.name === blueprint\n\t\t\t\t) ){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}while( entity = Object.getPrototypeOf( entity ) );\n\n\t\t\t/*;\n\t\t\t\t@note:\n\t\t\t\t\tIf you removed the condition, this may cause unwanted behavior.\n\t\t\t\t@end-note\n\t\t\t*/\n\t\t\tif( this.constructor.name != blueprint ){\n\t\t\t\tlet entity = this;\n\n\t\t\t\tdo{\n\t\t\t\t\tif( (\n\t\t\t\t\t\ttypeof entity == \"function\"\n\t\t\t\t\t\t&& entity.name === blueprint\n\t\t\t\t\t) || (\n\t\t\t\t\t\ttypeof entity.constructor == \"function\"\n\t\t\t\t\t\t&& entity.constructor.name === blueprint\n\t\t\t\t\t) ){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}while( entity = Object.getPrototypeOf( entity ) );\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/*;\n\t\t@note:\n\t\t\tThis is the generic stringify function,\n\t\t\t\tfor complex entity you need to override this.\n\t\t@end-note\n\t*/\n\tstringify( ){\n\t\ttry{\n\t\t\tif( this[ TYPE ] == \"object\" ){\n\t\t\t\treturn JSON.stringify( this.valueOf( ) );\n\t\t\t}\n\n\t\t\treturn EMPTY_STRING + this.valueOf( );\n\n\t\t}catch( error ){\n\t\t\ttry{\n\t\t\t\treturn this.valueOf( ).toString( );\n\n\t\t\t}catch( error ){\n\t\t\t\treturn this.toString( );\n\t\t\t}\n\t\t}\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tThis will call the static deserialization procedure of the constructor.\n\t\t@end-method-documentation\n\t*/\n\tdeserialize( data, parser, blueprint ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"data\": \"*\",\n\t\t\t\t\t\"parser\": \"function\",\n\t\t\t\t\t\"blueprint\": \"function\"\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\tlet procedure = Meta.deserialize;\n\n\t\tif(\n\t\t\ttypeof this.constructor == \"function\"\n\t\t\t&& typeof this.constructor.deserialize == \"function\"\n\t\t\t&& this.constructor.deserialize.name === \"deserialize\"\n\t\t){\n\t\t\tprocedure = this.constructor.deserialize;\n\t\t}\n\n\t\tif( arguments.length == 2 ){\n\t\t\treturn procedure( this.valueOf( ), arguments[ 0 ], arguments[ 1 ] );\n\n\t\t}else{\n\t\t\treturn procedure( data, parser, blueprint );\n\t\t}\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tReturns a tag format with value.\n\t\t\tThe value must be a data URL format.\n\n\t\t\tThe parser function will accept a context parameter.\n\n\t\t\tBy default this will serialize the entity using plain/text base64 data URL format.\n\n\t\t\tThe parser must return a serialize format of the data to be placed on the tag.\n\t\t@end-method-documentation\n\t*/\n\tserialize( parser ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"parser\": \"function\"\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\tlet defer = function parser( self ){\n\t\t\tlet value = sxty4( self.stringify( ) ).encode( );\n\n\t\t\treturn `${ DEFAULT_DATA_URL_PREFIX.replace( \"@type\", self[ TYPE ] ) }${ value }`;\n\t\t};\n\n\t\tif( typeof parser != \"function\" ){\n\t\t\tparser = defer;\n\t\t}\n\n\t\ttry{\n\t\t\treturn this.tag( parser( this ) );\n\n\t\t}catch( error ){\n\t\t\treturn this.tag( defer( this ) );\n\t\t}\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tStrict value equality.\n\t\t@end-method-documentation\n\n\t\t@note:\n\t\t\tOverride for deep checking.\n\t\t@end-note\n\t*/\n\tisEqual( entity ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"entity:required\": \"*\"\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\tif( entity instanceof Meta ){\n\t\t\treturn this.valueOf( ) === entity.valueOf( );\n\t\t}\n\n\t\treturn this.valueOf( ) === entity;\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tWhen the deserialization fails, or if there is error, this method returns true.\n\t\t@end-method-documentation\n\t*/\n\tisCorrupted( ){\n\t\treturn (\n\t\t\tthis[ CORRUPTED ] === CORRUPTED\n\t\t\t|| this.hasError( )\n\t\t);\n\t}\n\n\tisTagged( ){\n\t\treturn (\n\t\t\tthis[ TAGGED ] === TAGGED\n\t\t\t|| TAG_PATTERN.test( this.stringify( ) )\n\t\t);\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tIf the entity is not a tag format then it's raw.\n\t\t@end-method-documentation\n\t*/\n\tisRaw( ){\n\t\treturn !this.isTagged( );\n\t}\n\n\tsetError( error ){\n\t\tif( error instanceof Error ){\n\t\t\tthis[ ERROR ] = error;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tgetError( ){\n\t\treturn this[ ERROR ];\n\t}\n\n\thasError( ){\n\t\treturn this[ ERROR ] instanceof Error;\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tReturns the clone of this data.\n\t\t@end-method-documentation\n\t*/\n\tclone( ){\n\t\treturn Meta.create( this.constructor, this.valueOf( ) );\n\t}\n\n\t/*;\n\t\t@method-documentation:\n\t\t\tReturns the Meta instance of this data.\n\t\t@end-method-documentation\n\t*/\n\tnative( ){\n\t\treturn Meta.create( this.valueOf( ) );\n\t}\n\n\tgetType( ){\n\t\treturn this[ TYPE ];\n\t}\n\n\tgetName( ){\n\t\treturn this[ NAME ];\n\t}\n}\n\nharden( \"NAME\", NAME, Meta );\nharden( \"ENTITY\", ENTITY, Meta );\nharden( \"TYPE\", TYPE, Meta );\n\nharden( \"OBJECT\", OBJECT, Meta );\nharden( \"BOOLEAN\", BOOLEAN, Meta );\nharden( \"STRING\", STRING, Meta );\nharden( \"NUMBER\", NUMBER, Meta );\nharden( \"VALUE\", VALUE, Meta );\n\nharden( \"GARBAGE\", GARBAGE, Meta );\nharden( \"CORRUPTED\", CORRUPTED, Meta );\nharden( \"TAGGED\", TAGGED, Meta );\n\nharden( \"TAG_PATTERN\", TAG_PATTERN, Meta );\n\nharden( \"DATA_URL_TAG\", DATA_URL_TAG, Meta );\n\nmodule.exports = Meta;\n"]}